<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>@9am/halftone</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body {
            padding: 0 20px;
        }
        canvas, img {
            width: 100%;
        }

        .blend {
            isolation: isolate;
            position: relative;
            width: 100px;
            height: 100px;
        }
        .dot {
            mix-blend-mode: multiply;
            position: absolute;
            width: 60%;
            height: 60%;
        }
        .cyan {
            top: 0;
            left: 0;
            background: cyan;
        }
        .magenta {
            background: magenta;
            top: 0;
            right: 0;
        }
        .yellow {
            background: yellow;
            bottom: 0;
            right: 0;
        }
        .black {
            background: #333;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body>
    <h1>ðŸ¥‘</h1>
    <button>update</button>
    <div class="blend">
        <div class="dot cyan"></div>
        <div class="dot magenta"></div>
        <div class="dot yellow"></div>
        <div class="dot black"></div>
    </div>
    <img-halftone src="./img/fruit.jpg" shape="circle"></img-halftone>

    <!--
    <script type="module" src="https://cdn.skypack.dev/@9am/img-halftone"></script>
    <script src="https://www.unpkg.com/@9am/img-halftone"></script>
    -->
    <script type="module">
        import './src/index.ts';

        const halftone = document.querySelector('img-halftone');
        const button = document.querySelector('button');

        // Listen for all events
        halftone.addEventListener('loading', (e) => {
            console.log('ðŸŽ¨ Image loading started');
        });

        halftone.addEventListener('loaded', (e) => {
            console.log('âœ… Image loaded', e.detail);
        });

        halftone.addEventListener('canvasready', (e) => {
            console.log('ðŸŽ¯ Canvas ready', e.detail);
        });

        halftone.addEventListener('paintcomplete', (e) => {
            console.log('ðŸŽ‰ Painting complete');
        });

        button.addEventListener('click', () => {
            halftone.src = "/img/lamp.jpg";
        });
    </script>
</body>
</html>
